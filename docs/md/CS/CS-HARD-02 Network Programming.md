![img](./img/CS.PNG)

# CS-HARD-02 Network Programming

**引言**：随着互联网的迅猛发展，网络编程在现代软件开发中占据了举足轻重的地位。聊天室作为最早期的互联网应用之一，直观地展示了网络编程的基础概念，如客户端-服务器模型、TCP/IP协议、以及并发处理等。在这里，你将一步步实现它！

***注：本题统一在Linux下编写，暂不支持macOS，后续会有点小问题。***

**本题代码需要完善的注释（展现自己的理解加分），提交完整的学习流程加分，可合理使用ai，但ai扫题的本题不得分。**

## Part 1

### 初识Socket！

#### 任务：

学习并掌握Socket编程的基础知识，实现一个简单的客户端与服务端通信程序。

#### 具体要求：

1. 实现基本的C-S端通信，即客户端向服务端发送信息，服务器接收到信息后，向客户端反馈发送内容和结果。
2. 实现通信日志记录功能。以每次通信的时间和端口号命名日志文件，记录通信的成功与否及通信内容。日志文件应存放在log文件夹内。每次新连接创建一个新文件，连续对话记录在同一文件中，下一次连接则创建新的日志文件。
3. 实现客户端用户的注册和登录功能，并将通信内容格式化为：用户名--通信内容。
4. 使用`readline`库记录历史对话内容。
5. 在代码中加入完整的错误处理机制，确保程序在异常情况下（如网络中断、错误输入等）不会崩溃，并能够给出相应提示。
6. 提供客户端与服务器通信的运行结果及日志记录的截图，本地虚拟机中自己与自己通信即可。
7. 提交分文件编写的代码文件，并使用Makefile进行编译。

#### 学习提示：

1. 掌握**网络编程基本概念**，使用Socket库实现网络通信。
2. 学习使用`readline`库记录历史对话，了解Makefile的基本使用方法。

## Part 2

### 简单聊天室！

#### 任务：

实现一个支持多用户通信的简单聊天室。

#### 具体要求：

1. 编写服务器端程序，支持三个客户端同时连接并在聊天室中交流。消息格式同上。
2. 客户端连接服务器后，可创建聊天室ID，其他客户端可通过ID加入聊天室。实现合理的退出机制（不要再用`Ctrl+C`大退啦）。
3. 编写一个守护进程，确保服务端程序的持续稳定运行。
4. 禁用服务端的`Ctrl+C`退出方式，屏蔽`kill -9`之外的所有信号。
5. 加入用户权限管理系统。用户分为普通用户和管理员，管理员可以踢出普通用户，禁言。
6. 增加支持表情符号、文件传输的消息格式，使用简单的二进制协议来传输这些数据。
7. 处理多人同时聊天的并发问题。

#### 学习提示：

1. 学习多线程、多进程相关知识。使用`pthread`库编写多线程程序，掌握多线程环境下的锁机制及并发处理。使用新的进程作为守护程序，保证服务端的稳定运行。
2. 学习操作系统相关知识，了解信号量和信号处理。

**提交方式**：在Markdown文档中提交正确的**代码**和**运行结果**的截图。

## Part 3

### 扩展！

#### 任务：

实现支持大量用户同时聊天的聊天室。

#### 具体要求：

1. 实现1024个用户的群聊功能（可扩展至更多用户，加分，不可仅通过堆砌线程实现）。
2. 使用json作为消息的传递格式。
3. 编写测试程序，模拟1024个用户同时连接到聊天室。

#### 学习提示：

1. 学习`select`、`poll`、`epoll`等I/O多路复用机制。
2. 学习json序列化和反序列化。

#### 提交方式：

请提交包含本题题解文件及佐证材料的Github仓库url链接

## 出题人联系方式：

> Fortitude
>
> QQ：3386588492
>
> 邮箱：[3386588492@qq.com](mailto:13689050454@163.com)