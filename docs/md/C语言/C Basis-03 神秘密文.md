![](https://pic.imgdb.cn/item/64c4a2881ddac507cc007975.png)

# **C Basis-03 神秘密文**

> 由于loafer招新摸鱼，受到了微光神秘人的惩罚！神秘人修改了他的笔记本电脑，留下一张便条，上面写道：“要想拿到电脑密码，先解开这段神秘密文 **（见群文件“神秘密文.glimmer”）** 吧！”。可是loafer实在是太菜了，好心的你能帮帮他吗？

**该题相关文件请看招新群群文件夹“C Basis-03 神秘密文”。**

## Part 1 密文之钥

正当你们愁眉苦脸时，神秘人又给你们发了一条消息，内容如下：

> loafer,没想到你这么菜，那我只好给你一些提示了。
>
> ```c#
> 1 1 2
> 2 3 3
> 3 1
> 2 1 3
> 3 4
> 2 1 1
> ...
> (详细请见群文件"密文之钥.txt")
> ```
> 这是解开那段密文的密钥，不过需要根据我的规则对其进行操作才能得到真正的信息。
> 规则如下：
>
> - 实现链表的创建，在链表的头部或者尾部插入节点， 节点删除，遍历打印等基本功能。
>
> - 密文中，每行第一个数字代表链表操作类型。
> 	- 1 x y 为从链表头部先插入y，再插入x。
> 	- 2 x y 为从链表尾部先插入x，再插入y。
> 	- 3 x 为删除链表从头到尾数第x个节点。
> - 按照顺序依次执行每一步操作，最后从前往后遍历打印整个链表，最后得到字符串就是真正的密钥。
>
> 提示放这了，要是还解不开，那你就别想再玩电脑了！

然而现在的你可能并不是很懂什么是链表，但是没有关系，loafer会帮助你理解它的。

### step 1 内存与指针

要理解链表，首先我们先来了解什么是内存和指针。

一个由C/C++编译的程序占用的内存分为栈区(stack)，堆区(heap)，全局区(static)等区域，内存的不同区储存的数据的种类也不相同。

每一个变量都有一个内存位置，每一个内存位置都定义了可使用 **&** 运算符访问的地址，它表示了在内存中的一个地址，指针变量就是存放内存地址的变量。

请深入了解内存与指针，完成下面的任务。

#### task

1. 请问运行Test 函数会有什么样的结果？为什么函数`GetMemory1`和函数`GetMemory2`会导致不同的结果？

```c
char* GetMemory1(void) 
{
        char p[] = "hello world\n";
        return p;
}
char* GetMemory2(void) 
{
        return "hello world\n";
}
void Test(void) 
{
        char *str1 = NULL, *str2 = NULL;
        str1 = GetMemory1();
        str2 = GetMemory2();
        printf(str1);
    	printf("---------\n");
        printf(str2);
}
```

2. 进行了如下修改后，请问此时再运行Test函数又会有什么样的结果？为什么会出现这种问题？

```c
void GetMemory(char* p) 
{
        p = (char*)malloc(100);
}
void Test(void) 
{
        char* str = NULL;
        GetMemory(str);
        strcpy(str, "hello world\n");
        printf(str);
}
```

3.下面的函数`GetMemory1`和函数`GetMemory2`有什么区别？哪一个是正确的？为什么？

```c
char* GetMemory1(void) 
{
        char p[100];
        return p;
}
char* GetMemory2(void) 
{
		char *p = (char*)malloc(100);
        return p;
}
void Test(void) 
{
        char *str1 = NULL, *str2 = NULL;
        str1 = GetMemory1();
        str2 = GetMemory2();
        strcpy(str1, "hello world\n");
        strcpy(str2, "hello world\n");
        printf(str1);
    	printf("---------\n");
        printf(str2);
}
```



提交对第一、第二，第三三步运行结果的分析。

### step 2 链表的实现

我们先来看看链表的实现原理。

链表一般由多个节点组成，每个节点包括数据域和指针域两个部分，数据域里包含了你需要的信息，指针域储存了下一个节点的地址。

指针域的存在使得在链表的任何一个节点，都可以沿着指针域依次访问下去，犹如链条一般。

![img](https://pic.imgdb.cn/item/64d6af0a1ddac507ccfabab8.jpg)

利用搜索引擎详细学习链表相关知识后完成下面的任务。

#### task

实现链表的创建，在链表的头部或者尾部插入节点， 节点删除，遍历打印等基本功能。

提交正确编写可执行代码及运行截图，给出必要的注释说明。

### step 3 获取密钥

现在修改你编写的链表代码，输入密文之钥中的数据，得到真正的密钥吧。

#### task

- 提交修改后的代码及运行截图。
- 提交真正的密钥。

### 温馨提示

- 请不要颅内模拟一遍后直接将答案打印出来。
- 请使用链表数据结构实现。
- 请获取答案后不要提前剧透给其他同级。
- 如果实在弄不出来可以私聊出题人获取真正的密钥，但不要透露给其他人。

## Part 2 破解密文

当你们得到了真正的密钥，却发现是一串古怪的数字，这个时候神秘人又发来了消息：

> 可以嘛，没想到你们这么快就破解了密钥。
>
> 作为奖赏就把这三条线索给你们吧。
>
> 1. 神秘密文本质上是一串字符。
> 2. 密钥中的数字与栈的操作有关。
> 	- 1表示入栈操作，即将神秘密文中的一个字符入栈。
> 	- 2表示出栈操作。
> 	- 3表示出栈并打印出该字符。
> 	- 每次入栈时，入栈的字符都是上一次入栈字符的下一位。

这时，你又犯迷糊了，栈又是啥？这串字符又该如何输入程序？

### step 1 文件操作

在实际运用中，我们常常需要读取外部文件，或者将结果输出到外部，这时，我们就需要用到文件操作，同时，在实现文件批处理时，文件操作也是必要的。

请了解fopen，freopen，FILE等文件操作相关关键字的含义，并完成密文的读取任务。

#### task

提交能够读取密文的代码和密文内容。

### step 2 实现栈

我们来认识一下同样被广泛应用的栈结构。 栈是一种限制操作的线性表，是一个 LIFO 数据结构。 通常，插入操作在栈中被称作入栈 push 。添加元素时，总是在堆栈的末尾添加一个新元素。但是，删除操作，退栈 pop ，将始终删除队列中相对于它的最后一个元素。 在这种被称为 LIFO 数据结构中，将`首先处理添加到队列`中的`最新元素`。

![img](https://pic.imgdb.cn/item/64d6b8c11ddac507cc12c440.jpg)

接下来，请你实现栈的创建，入栈，出栈的功能，并利用你编写的栈和密钥破解出密文中隐藏的信息。

#### task

提交正确的可执行的代码和密文中隐藏的信息。

### 温馨提示

- 虽然可以通过改拓展名等方式获取密文中的字符串，但是还是请用文件操作的请示读取。
- 获取密文中的字符串中，不要颅内模拟得到密文中隐藏的信息。
- 请获取答案后，不要提前剧透给其他同级。
- 所有代码都会跑一遍检验是否符合要求，所以代码一定好好打。
- 最后的结果是有明确意义的，如果你的结果没有任何意义可以思考一下自己是不是哪一步出错了。

## 拓展

本题仅对文件操作中的读取和数据结构中的链表、栈进行了考察，其他文件操作和数据结构可自行学习。

## 题目要求

- 正确的可执行的代码
- 回答题目中的问题时，表达自己的想法
- 以文字和截图的形式记录你的完整做题过程
- 请提交PDF文档

## 需要掌握的知识点

- 内存与指针
- 文件操作
- 基础数据结构

## tips

- 善用搜索引擎

## **本题提交方式**

> 收件邮箱：glimmer401[@outlook.com](https://antio2.github.io/Glimmer-Recruit/outlook.com)
>
> 主题格式： 学号-姓名-考核-Cbasis-03
>
> 主题示例：2024090901012-张三-考核-Cbasis-03

## **出题人联系方式**

> loafer
>
> QQ：251492435
>
> 邮箱：[loafer_e@qq.com](mailto:loafer_e@qq.com)
