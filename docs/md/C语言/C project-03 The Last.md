<img src="https://pic.imgdb.cn/item/64fdc2b6661c6c8e543d9600.png" alt="C.png">

# C project-03 The Last

> 难度系数：困难
>
> 恭喜🎉🎉🎉，终于来到项目的最后一部分了，在这一部分，你将为你的计算器添加更多的运算功能，进一步完善你的计算器🧮🧮🧮。

## **part 0 调试模式**

在前面实现计算器的时候，我们肯定是需要对计算器进行调试的，调试一种常用方法就是添加`printf`语句，而我们计算器是不需要这些`printf`语句的，否则就会有一些用户看起来奇怪的输出😖，当我们调试完成的时候，一句一句的将我们的调试语句注释掉，是不是过于浪费时间和低效率，现在，让我们来实现计算器的调试模式，让我们能够“一键”调试。

### **任务**

- 给你的计算器添加调试模式，让你的计算器只需要在源代码文件添加一句语句，便可以进行调试打印（比如：正常模式是输入表达式，输出结果，调试模式是输入表达式，输出一些中间结果或者一些其他信息以便了解程序的运行状态。
- 利用`git`进行开发，新建一个分支用于调试模式的实现，完成后合并进入主分支，最后`push`到`github`仓库
- 用`makefile`进行编译

### **提示**

- 了解一下条件编译,`#ifdef`,`#else`,`#endif`等等

## **part 1 玩点不一样的😎**

前面，我们实现的计算器都是以十进制的方式解析表达式，然后计算，但是，我们作为学计算机的，经常要计算二进制和16进制的表达式，所以现在来实现一下计算器的二进制模式和16进制模式吧。

### **任务**

- 用`git`创建两个分支，分别用来实现计算器的二进制模式和16进制模式，完成后合并进入主分支，最后`push`到`github`仓库
- 你的计算器可以切换模式，例如`B`代表二进制模式，`D`代表十进制模式，`H`代表十六进制模式（计算器启动时，默认是十进制模式）,当键入这些字符后，计算器切换模式

```C
linux> ./cproject
interaction> 2+4
result> 6
interaction> B
result> The calculator switches to binary mode
interaction> 1100 + 0101
result> 10001
interaction> H
result> The calculator switches to hex mode
interaction> FD + A1
result> 19E
```

- 二进制和16进制模式只需要支持无符号整型的`+ - * / ()`运算
- 使用多文件构造程序，用`makefile`进行编译

### **提示**

- 了解二进制和16进制的计算规则
- 在程序中对字符串解析成十进制计算，然后再转化为要求进制的字符串输出

## **part 2 按位运算**

前面，你已经为你的计算器添加了两种模式，在二进制中，有一种运算特别独特 ，这种运算叫做按位运算，现在，让你的计算器在二进制模式下支持按位运算`& | ^`.

### **任务**

- 了解按位运算是什么，它们是如何让操作数进行运算的
- 让你的计算器在二进制模式下支持按位运算`& | ^`
- 用`git`进行开发，新建一个分支用于按位运算功能实现，完成后再合并回主分支，最后`push`到`github`仓库
- 用`makefile`进行编译

### **提示**

- 了解c语言的符号的优先级

## **part 3 关系运算**

在c程序中，关系运算是很常见的，例如`a = 4 > 1;`,那么`a`的值为`1`,现在，让我们来试着让我们的计算器也能实现关系运算。

### **任务**

- 在`D`模式下添加关系运算，`== != < > <= >= || &&`八个关系运算符
- 用`git`进行开发，新建一个分支用于关系运算功能实现，完成后再合并回主分支，最后`push`到`github`仓库

### **提示**

- 查阅c的运算符的优先级
- 以空格分割操作数和运算符，利用`strcmp`函数匹配运算符从而进行运算
- 可以利用正则表达式对字符串进行处理，例如找出空格，匹配双字符运算符等等，c语言可以利用`regex.h`进行正则表达式的匹配
- 有能力的同学还可以试试不利用栈，利用正则表达式重构计算器，对处理字符串的要求高

## **part 4 测试**

恭喜你🎊🎊🎊，终于来到最后一步，你的计算器基本大功告成了，现在是最后一步了——测试，只要通过了测试，你的计算器就完成了🎆🎆🎆。

### **任务**

- 对你的计算器进行大规模测试，三种模式，每种模式30个测试用例
- 尝试自己编写测试用例

### **提示**

- 可以参照`C project02`的测试，将测试用例写在文件里面，然后将文件重定向到计算器的输入，然后将计算器的输出重定向到另一个文件里面，然后利用`diff`等工具和正确答案比较
- 编写测试用例时，要注意对基本运算符的测试，应该测试各种不同的数字和数值类型组合的情况，如正数、负数、小数、整数等情况
- 注意边界测试，测试数字的边界情况，例如最大值、最小值、零、负数、正数等（对最大值，最小值的判断，也就是对溢出情况的判断）
- 注意错误输入测试，测试当输入非数字或者非法表达式时计算器应该识别出来并输出告诉用户，例如输入字母、特殊字符等。
- 注意复合表达式测试，测试当用户输入包含多个运算符和括号的复合表达式时，计算器能否正确地解析和计算这些表达式

## **需要提交的内容及要求**

- 可以描述一下解题过程中遇到的困难以及如何解决的，描述一下解题思路
- 存放项目的`github`仓库链接
- 每一部分计算器运行截图，测试用例内容和测试结果截图
- 良好的代码习惯，例如适当的注释，每个文件开头都应该添加注释说明该文件的内容和作用（加分🥰）
- 请提交PDF文档

## **本题提交方式**

> 收件邮箱：[glimmer401@outlook.com](mailto:glimmer401@outlook.com)
>
> 主题格式： 学号-姓名-考核-Cproject-03
>
> 主题示例：2024090101012-张三-考核-Cproject-03

## **出题人联系方式**

> QQ:239148349
>
> 邮箱：[LLP_PLL@outlook.com](mailto:LLP_PLL@outlook.com)